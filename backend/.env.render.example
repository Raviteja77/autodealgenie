# Render Environment Variables for AutoDealGenie Backend
# Copy this file and set the values in your Render dashboard

# ===========================
# REQUIRED SECRET VARIABLES
# ===========================
# Generate with: openssl rand -hex 32
SECRET_KEY=<generate-with-openssl-rand-hex-32>

# Supabase PostgreSQL Connection (https://supabase.com)
# Get from: Supabase Project Settings → Database → Connection String
POSTGRES_SERVER=db.xxxxxxxxxxxxx.supabase.co
POSTGRES_USER=postgres
POSTGRES_PASSWORD=<your-supabase-password>
POSTGRES_DB=postgres
POSTGRES_PORT=5432

# MongoDB Atlas (https://www.mongodb.com/cloud/atlas)
# Get from: MongoDB Atlas → Clusters → Connect → Connect your application
MONGODB_URL=mongodb+srv://<username>:<password>@cluster0.xxxxx.mongodb.net/autodealgenie?retryWrites=true&w=majority

# Upstash Redis (https://upstash.com)
# Get from: Upstash Console → Redis → Details
REDIS_HOST=<your-redis-host>.upstash.io
REDIS_PORT=<your-redis-port>
REDIS_PASSWORD=<your-redis-password>
REDIS_DB=0
REDIS_TLS=true

# OpenAI API Key (https://platform.openai.com/api-keys)
OPENAI_API_KEY=sk-<your-openai-api-key>

# CORS Origins (update after deploying frontend to Vercel)
# Development
BACKEND_CORS_ORIGINS=["https://<your-app-dev>.vercel.app","http://localhost:3000"]
# Production
BACKEND_CORS_ORIGINS=["https://<your-app>.vercel.app","https://www.your-domain.com"]

# ===========================
# AUTOMATIC VARIABLES (Set by Render)
# ===========================
# These are automatically set by render.yaml and don't need to be added manually:
# - ENVIRONMENT (development or production)
# - PROJECT_NAME
# - VERSION
# - API_V1_STR
# - ALGORITHM
# - ACCESS_TOKEN_EXPIRE_MINUTES
# - REFRESH_TOKEN_EXPIRE_DAYS
# - LOG_LEVEL
# - USE_MOCK_SERVICES
# - PORT

# ===========================
# OPTIONAL VARIABLES
# ===========================
# MarketCheck API (for vehicle data)
MARKET_CHECK_API_KEY=<your-marketcheck-api-key>

# OpenRouter API (alternative to OpenAI)
OPENROUTER_API_KEY=<your-openrouter-api-key>

# Custom OpenAI Model
OPENAI_MODEL=gpt-4

# ===========================
# SETUP INSTRUCTIONS
# ===========================
# 1. Create accounts on:
#    - Supabase (https://supabase.com) - PostgreSQL database
#    - MongoDB Atlas (https://www.mongodb.com/cloud/atlas) - Document database
#    - Upstash (https://upstash.com) - Redis cache
#    - OpenAI (https://platform.openai.com) - AI API
#
# 2. Create a new service on Render (https://render.com)
#    - Connect your GitHub repository
#    - Select "Blueprint" and use render.yaml
#    - Or manually create a "Web Service"
#
# 3. Add the secret environment variables in Render dashboard:
#    - Settings → Environment → Add Environment Variable
#    - Add each variable marked as "sync: false" in render.yaml
#
# 4. Deploy the service:
#    - Render will automatically deploy from the specified branch
#    - Monitor logs during deployment
#    - Note the service URL (e.g., https://autodealgenie-backend-dev.onrender.com)
#
# 5. Update CORS origins after frontend deployment
#    - Add your Vercel frontend URL to BACKEND_CORS_ORIGINS
#
# 6. Run database migrations (one-time setup):
#    - Use Render Shell or local terminal:
#      cd backend && alembic upgrade head
#
# ===========================
# NOTES
# ===========================
# - Render free tier spins down after 15 minutes of inactivity
# - First request after spindown takes 30-60 seconds
# - Free tier includes 750 hours/month (sufficient for one service)
# - Use PgBouncer connection pooling with Supabase (port 6543)
# - Upstash Redis requires TLS connection
# - MongoDB Atlas free tier has 512MB storage limit
# - Supabase free tier has 500MB database limit
